## The Linux Command Line  
### Running Linux 
Let's start by running a docker container interactively : 
``` powershell
docker pull ubuntu 
# OR 
docker run ubuntu
# Like that will search for this image locally and if it does not find it
# will pull it from the internet
```
Them we have :
``` powershell
PS C:\Users\joaoc> docker pull ubuntu
Using default tag: latest
latest: Pulling from library/ubuntu
405f018f9d1d: Pull complete
Digest: sha256:b6b83d3c331794420340093eb706a6f152d9c1fa51b262d9bf34594887c2c7ac
Status: Downloaded newer image for ubuntu:latest
docker.io/library/ubuntu:latest
```
When we do `docker run` the container just build, runs and shutsdown. So we need to build it interactively :
``` powershell
PS C:\Users\joaoc> docker run ubuntu
PS C:\Users\joaoc> docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
PS C:\Users\joaoc> docker ps -a
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
4d9397cd0bf1   ubuntu         "bash"                   9 seconds ago   Exited (0) 8 seconds ago             sleepy_blackwell
f1b140cdc82b   hello-docker   "docker-entrypoint.sâ€¦"   22 hours ago    Exited (0) 22 hours ago              zealous_galois
```
![image](https://user-images.githubusercontent.com/49458268/180814044-e03a07e1-0f42-47b0-97b2-037ed0d2b27b.png)

What is this `root@7e01079dc012:/#` ? 
This is called the __shell prompt__. A prompt in computer science is `a word or symbol on a screen to show that the system is waiting for input.`

What this `root@7e01079dc012:/#` stands for ? 
- root : the name of the current login user. The `root` user is the most priviliged user and is which we are log in by default.
- @ : just a separator :)
- 7e01079dc012 : Name of the machine. So the container was that ID that is generated by Docker Automatically. 
- / : (Where we are) We are in the highest directory of the file system inside the container
- '#' : It means i have all the priviligies. Instead of `#` i could have `$`, if log in was a normal user.

#### Questions : 
##### Why the container just shutsdown when we do `docker run [image]` ?
Is like this by default, if we dont interact with it, it just shutsdown.

<br></br>
### Managing Packages 
In our days most of the times OS came with a `Package Manager`. For example : 
- npm
- apt
- nuget
- pim
- yarn

Linux is no different, and __it comes with `apt` (Advance Package Tool)__ .
`APT` makes use of a database in linux where is the references to possible packages that we need, and if they are installed or not : 
``` powershell
root@7e01079dc012:/# apt list
Listing... Done
adduser/now 3.118ubuntu5 all [installed,local]
apt/now 2.4.5 amd64 [installed,local]
base-files/now 12ubuntu4.1 amd64 [installed,local]
base-passwd/now 3.5.52build1 amd64 [installed,local]
bash/now 5.1-6ubuntu1 amd64 [installed,local]
bsdutils/now 1:2.37.2-4ubuntu3 amd64 [installed,local]
coreutils/now 8.32-4.1ubuntu1 amd64 [installed,local]
dash/now 0.5.11+git20210903+057cd650a4ed-3build1 amd64 [installed,local]
debconf/now 1.5.79ubuntu1 all [installed,local]
debianutils/now 5.5-1ubuntu2 amd64 [installed,local]
diffutils/now 1:3.8-0ubuntu2 amd64 [installed,local]
dpkg/now 1.21.1ubuntu2.1 amd64 [installed,local]
e2fsprogs/now 1.46.5-2ubuntu1 amd64 [installed,local]
findutils/now 4.8.0-1ubuntu3 amd64 [installed,local]
gcc-12-base/now 12-20220319-1ubuntu1 amd64 [installed,l
```
In this case we does not have `nano` reference for instalation, so when i do this i get error: 
``` powershell
root@7e01079dc012:/# apt install nano
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Package nano is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'nano' has no installation candidate
```
So, i have to update the database with the packages first : 
``` powershell
root@7e01079dc012:/# apt update
Get:1 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]
Get:2 http://archive.ubuntu.com/ubuntu jammy InRelease [270 kB]
Get:3 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [115 kB]
Get:4 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [4648 B]
Get:5 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [285 kB]
Get:6 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [114 kB]
Get:7 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [261 kB]
Get:8 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [99.8 kB]
Get:9 http://archive.ubuntu.com/ubuntu jammy/restricted amd64 Packages [164 kB]
Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 Packages [1792 kB]
Get:11 http://archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [17.5 MB]
Get:12 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [266 kB]
Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [306 kB]
Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [480 kB]
Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [212 kB]
Get:16 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [7804 B]
Get:17 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [5812 B]
Fetched 22.0 MB in 42s (521 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
9 packages can be upgraded. Run 'apt list --upgradable' to see them.
```
And them install what we want
``` powershell
root@7e01079dc012:/# apt install nano
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Suggested packages:
  hunspell
The following NEW packages will be installed:
  nano
0 upgraded, 1 newly installed, 0 to remove and 9 not upgraded.
Need to get 280 kB of archives.
After this operation, 881 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu jammy/main amd64 nano amd64 6.2-1 [280 kB]
Fetched 280 kB in 1s (317 kB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package nano.
(Reading database ... 4395 files and directories currently installed.)
Preparing to unpack .../archives/nano_6.2-1_amd64.deb ...
Unpacking nano (6.2-1) ...
Setting up nano (6.2-1) ...
update-alternatives: using /bin/nano to provide /usr/bin/editor (editor) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/editor.1.gz because associated file
update-alternatives: using /bin/nano to provide /usr/bin/pico (pico) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/pico.1.gz because associated file 
root@7e01079dc012:/#
```
#### Questions : 
#### What if even with the update we dont get the reference in the database for instalation ? 

<br></br>


### Linux File System : 
#### Windows File System vs Linux File System
![image](https://user-images.githubusercontent.com/49458268/181918859-a179e98b-64ee-43bb-9d76-60ceb48fe8e0.png)
![image](https://user-images.githubusercontent.com/49458268/181918883-623efbfe-30c0-46a5-95ea-4255e6dba91b.png)

#### Typical Commands :
- pwd 
- cd [Relative | Absolute Path]
- echo 
- cd ~ (is like doing cd to the user directory, if is `Root` it will go to root dir if is normal user it will go to `home`)
- rm (to remove files) OR rm -r (to remove a folder, removes all the files and dirs inside recursively) 
- mkdir (creates dir)
- touch (create one or multiple files)
- mv (to move or rename files or directories)
- nano (to create files)
- cat (to see a little about the file)
- less (to check big files, we can scroll up and down)
- head (to check first lines, we can pass if is 5 lines 4 etc...)
- tail (to check last lines)
- '>' (to do redirection of output)
(...)

##### Chainning
``` bash
mkdir test ; cd test ; echo done # do one command one by one, it does not matter if one of them fails, it carries on...
mkdir test && cd test && echo done # do command one by one, if one fails, stop execution 
mkdir test | echo 'directory exists' # do first command, if it fails do the other one
```
##### Piping
``` bash 
ls /bin | less # grab all the directories names from bin and use them was input to `less`
ls \bin | head -5 # grab all the dirs names in bin and use them to with `head` cmd. 
```
``` bash
root@1ead6fa28f93:/# ls \bin | head -5
[
addpart
apt
apt-cache
apt-cdrom
```
Writing commands in paragraphs :
``` bash
root@1ead6fa28f93:/# mkdir test.txt;\
> cd test;\
> echo done
```
#### Environment Variables :
``` powershell 
printenv # print all environment variables
printenv PATH # print value of specific variable
echo $PATH # same was above 
export DB_USER=Campos # create OS environment variable for current terminal session (after existing and entering container i will lost it)
echo DB_USER=Campos >> .bashrc # using 'redirection APPEND (NOT override with '>') to .bashrc file each is used on startup 
source .bashrc # reload .bashrc file configuration 
echo $DB_USER # it should work 
```

##### Questions :
- What is Environment Variables ?
A environemnt variable is a dynamic value that the OS or other programs can use. WIth docker we normally use them to store configuration settings.
- What is the PATH variable ?
Is a very important variable that the OS uses to check for programs. When we are doing `dotnet` or `java` the OS will not go search in all the disks for those 
programs, it will go to very specific directories. These directories are described in the `PATH` environment variable. 
- What is the .bashrc file ?
Is a bash script that is loaded on boot stage of the OS and was user account configuration, like environemnt variables.
- Why after `echo DB_USER=Campos >> .bashrc`, the variable does not appear for command `printenv` ?

<br></br>
### Managing Processes 
A process is instance of a program. 
``` powershell
# we use ps to check each processes are running :
root@1ead6fa28f93:~# ps
  PID TTY          TIME CMD
    1 pts/0    00:00:00 bash
   18 pts/0    00:00:00 ps
```
Some other commands : 
``` powershell
sleep 2 # BASH sleeps for 2 seconds
sleep 100 & # Puts a BASH sleeping for 100 seconds in the background

root@1ead6fa28f93:~# ps
  PID TTY          TIME CMD
    1 pts/0    00:00:00 bash
   21 pts/0    00:00:00 sleep
   22 pts/0    00:00:00 ps
```
Killing a process : 
``` powershell
root@1ead6fa28f93:~# ps
  PID TTY          TIME CMD
    1 pts/0    00:00:00 bash
   23 pts/0    00:00:00 sleep
   24 pts/0    00:00:00 ps
root@1ead6fa28f93:~# kill 23
root@1ead6fa28f93:~# ps
  PID TTY          TIME CMD
    1 pts/0    00:00:00 bash
   25 pts/0    00:00:00 ps
[1]+  Terminated              sleep 100
```

<br></br>
### Managing Users :
For creating a user we use `useradd`. We can also use `adduser` each is a post-script that uses `useradd` each is more interactive. Normally 
we want to be quick and just use `useradd`.

#### Creating a User and check account information 
Creating a user : 
``` powershell
useradd -m paula # we create Paula user with Home directory using `-m, --create-home`
```
Next we can see the user account information 
``` powershell
root@1885fa06a256:/# cat etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
# (...)
paula:x:1000:1000::/home/paula:/bin/sh # [username] : [x - password stored somehere else] : [user id] : [group id] : [home directory] : [default shell program used when user logins in]
```
#### Change default shell on startup :
Paula prefers to use `bash` instead of `sh` shell application. So, to _change shell default program_ : 
``` powershell
usermod -s /bin/bash paula
```

#### Login in container with another user :
we need to __execute__ a bash session inside our container 
``` powershell
docker exec -it -u paula 1885f bash
```
